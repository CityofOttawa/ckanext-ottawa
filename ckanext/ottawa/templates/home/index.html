{% extends "page.html" %}

{% block content %}
  <div class="container">
    <div class="row" style="margin-right:0;">
      <div class=" main-content col-md-9">
          <main role="main" property="mainContentOfPage">

          {% block flash %}
          {% if flash_messages %}
          <div class="row">
            {% for message in flash_messages %}
            <div class="alert fade in {{ message.category }}">
              {{ h.literal(message) }}
            </div>
            {% endfor %}
          </div>
          {% endif %}
          {% endblock flash %}

          <div class="row">
              <div class="col-md-12">
                  <h3>{{_("Welcome to Ottawa's Open Data Catalogue")}}</h3>

                  <p>
                      This website is a source of data released by the City of Ottawa
                      for free use by the public. Here are some of the things you
                      can do to get started:
                  </p>

                  <ul>
                      <li><a href="/dataset">Search</a> for the data you need</li>
                      <li>Browse by <a href="/group">categories</a> or <a href="/organization">departments</a></li>
                      <li>Explore the <a href="/api-helper">API</a></li>
                      <li>Read the City of Ottawa <a href="http://ottawa.ca/en/mobile-apps-and-open-data/open-data-terms-use">Open Data Terms of Use</a></li>
                  </ul>
              </div>
          </div>

          <div class="row">
              <h3 style="text-align: center;">{{_('Featured Datasets')}}</h3>
              {% for feature_row in c.featured_views | batch(2) %}
              <div class="row-fluid">
                  {% for feature in feature_row %}
                  <div class="col-md-6 ottawa-previews">
                      <div class="well">
                          {% set p = feature['package'] %}
                          <h4>{{ h.link_to(h.truncate(h.title(p['title'], h.lang()), 80), h.url_for(controller='package', action='read', id=p.name)) }}</h4>
                          {% snippet 'package/snippets/resource_view.html',
                          resource_view = feature['view'],
                          resource = feature['resource'],
                          package = p
                          %}
                      </div>
                  </div>
                  {% endfor %}
              </div>
              {% endfor %}
          </div>

          </main>
        </div>

        <div class="col-md-3">
          <div class="mrgn-lft-md panel panel-default panel-body">
            <h3 style="text-align:center;">{{_('Search by Group')}}</h3>
            {% for group in h.groups()[0:8] %}
            {% snippet "group/snippets/group_item.html", group=group, position=loop.index, loop_items=2 %}
            {% endfor %}
          </div>
        </div>

      </div>
    </div>
  </div>
{% endblock %}
